{"version":3,"file":"/assets/admin/js/wp-adminify--setup-wizard.min.js","mappings":";uYACA,0qQACAA,QAAQ,SAASC,GAEb,IAAIC,EAAAA,GAAI,CAEJC,GAAI,6BAEJC,KAAM,sDACCC,4BAA0B,IAC7BC,YAAa,MAAI,EAGrBC,QAAO,mBACH,IAAMC,EAAS,IAAIC,gBAAiBC,OAAOC,SAASC,QAC/CJ,EAAOK,IAAI,UAAUC,KAAKR,YAAcE,EAAOO,IAAI,QAC5D,EAEAC,QAAS,CAELC,SAAQ,oBACJ,OAAOH,KAAKI,KAChB,EAEAC,SAAQ,kBAAED,GACNJ,KAAKI,MAAQA,CACjB,EAEAE,aAAY,sBAAEF,GAAQ,WAElBJ,KAAKK,SAAUD,GAEVJ,KAAKO,QAKVP,KAAKO,MAAQC,GAAGJ,MAAM,CAClBK,MAAO,yBACPC,OAAQ,CACJC,KAAM,kBAEVC,UAAU,IAGdZ,KAAKO,MAAMM,GAAI,UAAU,WACrB,IAAMC,EAAa,EAAKP,MAAMQ,QAAQd,IAAI,aAAae,QAAQC,SAC/DH,EAAWI,UAAYJ,EAAWK,MAAMD,UAAUE,IAClD,IAAIC,EAAS,EAAKlB,WAClB,IAAM,IAAImB,KAAaD,EAASA,EAAOC,GAAaR,EAAWQ,EACnE,IAEAtB,KAAKO,MAAMM,GAAI,QAAQ,WACnB,IAAIU,EAAY,EAAKhB,MAAMQ,QAAQd,IAAI,aACnCoB,EAAS,EAAKlB,WAClB,GAAKkB,GAAUA,EAAOG,GAAK,CACvB,IAAIV,EAAaN,GAAGJ,MAAMU,WAAYO,EAAOG,IAE7C,OADAV,EAAWW,QACJF,EAAUG,IAAKZ,EAAa,CAACA,GAAc,GACtD,CACA,OAAOS,EAAUG,IAAI,GACzB,KA5BI1B,KAAKO,MAAMoB,MAgCnB,EAEMC,aAAY,wBAAG,kBAlEjC,oRAkEiC,kKACCpB,GAAGqB,KAAKC,KAAM,8BAA+B,CAAEC,SAAU,EAAKA,SAAUvC,YAAa,EAAKA,YAAawC,SAAU,EAAKC,UAAW,QAA7IC,EAAM,EAAH,OACGA,EAAIC,WAAWvC,OAAOC,SAAWqC,EAAIC,UAAS,gDAFzC,EAGrB,IAMZ","sources":["webpack://adminify/./dev/admin/modules/setup-wizard/setup-wizard.js"],"sourcesContent":["import Vue from 'vue';\n\njQuery( function($) {\n\n    new Vue({\n\n        el: '#wp-adminify--setup-wizard',\n\n        data: () => ({\n            ...adminify_setup_wizard_data,\n            active_step: null\n        }),\n\n        mounted() {\n            const params = new URLSearchParams( window.location.search );\n            if ( params.has('step') ) this.active_step = params.get('step');\n        },\n\n        methods: {\n\n            getMedia() {\n                return this.media;\n            },\n\n            setMedia( media ) {\n                this.media = media;\n            },\n\n            handle_media( media ) {\n\n                this.setMedia( media );\n                \n                if ( this.frame ) {\n                    this.frame.open();\n                    return;\n                }\n\n                this.frame = wp.media({\n                    title: 'Select or Upload Media',\n                    button: {\n                        text: 'Use this media'\n                    },\n                    multiple: false\n                });\n                \n                this.frame.on( 'select', () => {\n                    const attachment = this.frame.state().get('selection').first().toJSON();\n                    attachment.thumbnail = attachment.sizes.thumbnail.url;\n                    let _media = this.getMedia();\n                    for ( let media_key in _media ) _media[media_key] = attachment[media_key];\n                });\n\n                this.frame.on( 'open', () => {\n                    let selection = this.frame.state().get('selection');\n                    let _media = this.getMedia();\n                    if ( _media && _media.id ) {\n                        let attachment = wp.media.attachment( _media.id );\n                        attachment.fetch();\n                        return selection.add( attachment ? [attachment] : [] );\n                    }\n                    return selection.add([]);\n                });\n\n                this.frame.open();\n\n            },\n\n            async handleSubmit() {\n                const res = await wp.ajax.post( 'wpadminify_save_wizard_data', { settings: this.settings, active_step: this.active_step, _wpnonce: this.wpnonce } );\n                if ( res && res.redirect ) window.location = res.redirect;\n            }\n\n        }\n\n    });\n\n});"],"names":["jQuery","$","Vue","el","data","adminify_setup_wizard_data","active_step","mounted","params","URLSearchParams","window","location","search","has","this","get","methods","getMedia","media","setMedia","handle_media","frame","wp","title","button","text","multiple","on","attachment","state","first","toJSON","thumbnail","sizes","url","_media","media_key","selection","id","fetch","add","open","handleSubmit","ajax","post","settings","_wpnonce","wpnonce","res","redirect"],"sourceRoot":""}